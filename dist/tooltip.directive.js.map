{"version":3,"file":"tooltip.directive.js","sourceRoot":"","sources":["../src/tooltip.directive.ts"],"names":[],"mappings":"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","sourcesContent":["import {\r\n  AfterViewInit,\r\n  ApplicationRef,\r\n  ComponentFactoryResolver,\r\n  ComponentRef,\r\n  Directive,\r\n  ElementRef,\r\n  HostListener,\r\n  Input,\r\n  OnDestroy,\r\n  OnInit,\r\n  ViewContainerRef,\r\n}                   from '@angular/core';\r\nimport { Platform } from '@ionic/angular';\r\n\r\nimport { TooltipBox } from './tooltip-box.component';\r\nimport { TooltipController } from './tooltip.cotroller';\r\n\r\n@Directive({\r\n  selector: '[tooltip]',\r\n})\r\nexport class Tooltip implements OnInit, AfterViewInit, OnDestroy {\r\n\r\n\r\n  @Input() tooltip: string;\r\n\r\n  @Input() positionV: string;\r\n\r\n  @Input() positionH: string;\r\n\r\n  @Input() event: 'press' | 'click' | 'hover';\r\n\r\n  @Input() mobileEvent: 'press' | 'click' = 'press';\r\n\r\n  @Input() desktopEvent: 'press' | 'click' | 'hover' = 'hover';\r\n\r\n  @Input() topOffset: number;\r\n\r\n  @Input() leftOffset: number;\r\n\r\n  @Input() hideOthers: boolean;\r\n\r\n  @Input()\r\n  set navTooltip(val: boolean) {\r\n    this._navTooltip = typeof val !== 'boolean' || val !== false;\r\n  }\r\n\r\n  get navTooltip(): boolean {\r\n    return this._navTooltip;\r\n  }\r\n\r\n  @Input()\r\n  set arrow(val: boolean) {\r\n    this._arrow = typeof val !== 'boolean' || val !== false;\r\n  }\r\n\r\n  get arrow(): boolean {\r\n    return this._arrow;\r\n  }\r\n\r\n  @Input() duration: number = 3000;\r\n\r\n  @Input()\r\n  set active(val: boolean) {\r\n    this._active = typeof val !== 'boolean' || val !== false;\r\n    this._active ? this.canShow && this.showTooltip() : this.removeTooltip();\r\n  }\r\n\r\n  get active(): boolean {\r\n    return this._active;\r\n  }\r\n\r\n  @Input()\r\n  set view(val: ViewContainerRef) {\r\n    this._viewContainer = val;\r\n  }\r\n\r\n  get view(): ViewContainerRef {\r\n    return(this._viewContainer);\r\n  }\r\n\r\n  private _arrow: boolean = false;\r\n  private _navTooltip: boolean = false;\r\n  private tooltipElement: ComponentRef<TooltipBox>;\r\n  private tooltipTimeout: any;\r\n  private _canShow: boolean = true;\r\n  private _active: boolean = false;\r\n  private _viewContainer: ViewContainerRef;\r\n\r\n  constructor(\r\n    private el: ElementRef,\r\n    private appRef: ApplicationRef,\r\n    private platform: Platform,\r\n    private _componentFactoryResolver: ComponentFactoryResolver,\r\n    private tooltipCtrl: TooltipController\r\n  ) {\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    // Show the tooltip immediately after initiating view if set to\r\n    if (this._active) {\r\n      this.trigger();\r\n    }\r\n  }\r\n\r\n  ngOnInit() {\r\n    // Set default event type by platform if event is not defined\r\n    if (!this.event) {\r\n      this.event = this.platform.is('mobile') ? this.mobileEvent : this.desktopEvent;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Set the canShow property\r\n   * Ensure that tooltip is shown only if the tooltip string is not falsey\r\n   */\r\n  set canShow(show: boolean) {\r\n    this._canShow = show;\r\n  }\r\n\r\n  /**\r\n   * @return {boolean} TRUE if the tooltip can be shown\r\n   */\r\n  get canShow(): boolean {\r\n    return this._canShow && this.tooltip !== '';\r\n  }\r\n\r\n  /**\r\n   * Handles the click/press event and shows a tooltip.\r\n   * If a tooltip already exists, it will just reset it's timer.\r\n   */\r\n  trigger() {\r\n    if (!this.canShow) {\r\n      return;\r\n    }\r\n\r\n    if (this.tooltipElement) {\r\n      this._resetTimer();\r\n    } else {\r\n      this.showTooltip();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Creates a new tooltip component and adjusts it's properties to show properly.\r\n   */\r\n  showTooltip() {\r\n    this._createTooltipComponent();\r\n\r\n    const tooltipComponent: TooltipBox = this.tooltipElement.instance;\r\n\r\n    tooltipComponent.text = this.tooltip;\r\n    tooltipComponent.init.then(() => {\r\n      const tooltipPosition = this._getTooltipPosition();\r\n\r\n      tooltipComponent.posLeft = tooltipPosition.left;\r\n      tooltipComponent.posTop = tooltipPosition.top;\r\n\r\n      tooltipComponent.fadeState = 'visible';\r\n\r\n      if (this.arrow) {\r\n        let arrowPosition;\r\n        if (this.positionV === 'top') {\r\n          arrowPosition = 'bottom';\r\n        } else if (this.positionV === 'bottom') {\r\n          arrowPosition = 'top';\r\n        } else if (this.positionH === 'left') {\r\n          arrowPosition = 'right';\r\n        } else {\r\n          arrowPosition = 'left';\r\n        }\r\n        tooltipComponent.arrow = arrowPosition;\r\n      }\r\n\r\n      if (!this._active) {\r\n        this.tooltipTimeout = setTimeout(\r\n          this.removeTooltip.bind(this),\r\n          this.duration,\r\n        );\r\n      }\r\n    });\r\n  }\r\n\r\n  @HostListener('click')\r\n  onClick(): void {\r\n    if (this.event === 'click') {\r\n      this.trigger();\r\n    }\r\n  }\r\n\r\n  @HostListener('press')\r\n  onPress(): void {\r\n    if (this.event === 'press') {\r\n      this.trigger();\r\n    }\r\n  }\r\n\r\n  @HostListener('mouseenter')\r\n  onMouseEnter(): void {\r\n    if (this.event === 'hover') {\r\n      this.active = true;\r\n    }\r\n  }\r\n\r\n  @HostListener('mouseleave')\r\n  onMouseLeave(): void {\r\n    if (this.event === 'hover') {\r\n      this.active = false;\r\n    }\r\n  }\r\n\r\n  private _createTooltipComponent() {\r\n    let viewport: ViewContainerRef = this._viewContainer || (<any>this.appRef.components[0])._component._viewport;\r\n    let componentFactory = this._componentFactoryResolver.resolveComponentFactory(TooltipBox);\r\n\r\n    if (viewport) {\r\n      this.tooltipElement = viewport.createComponent(componentFactory);\r\n      this.tooltipCtrl.addTooltip(this);\r\n    }\r\n    else\r\n      console.warn('No view container to create tooltip in');\r\n  }\r\n\r\n  private _getTooltipPosition() {\r\n    const tooltipNativeElement: HTMLElement = this.tooltipElement.instance.getNativeElement(),\r\n      el: HTMLElement = this.el.nativeElement,\r\n      rect: ClientRect = el.getBoundingClientRect();\r\n\r\n    let positionLeft: number,\r\n      positionTop: number,\r\n      spacing: number = 10;\r\n\r\n    if (this.navTooltip) {\r\n      this.positionV = 'bottom';\r\n      this.arrow = false;\r\n      spacing = 20;\r\n    }\r\n\r\n    if (this.positionH === 'right') {\r\n      positionLeft = rect.right + spacing;\r\n    } else if (this.positionH === 'left') {\r\n      positionLeft = rect.left - spacing - tooltipNativeElement.offsetWidth;\r\n    } else if (this.navTooltip) {\r\n      positionLeft = rect.left + el.offsetWidth / 2;\r\n    } else {\r\n      positionLeft = rect.left;\r\n    }\r\n\r\n    if (this.positionV === 'top') {\r\n      positionTop = rect.top - spacing - tooltipNativeElement.offsetHeight;\r\n    } else if (this.positionV === 'bottom') {\r\n      positionTop = rect.bottom + spacing;\r\n    } else {\r\n      positionTop =\r\n        rect.top + el.offsetHeight / 2 - tooltipNativeElement.offsetHeight / 2;\r\n    }\r\n\r\n    if (+this.topOffset) {\r\n      positionTop += +this.topOffset;\r\n    }\r\n    if (+this.leftOffset) {\r\n      positionLeft += +this.leftOffset;\r\n    }\r\n\r\n    if (\r\n      positionLeft + tooltipNativeElement.offsetWidth + spacing >\r\n      this.platform.width()\r\n    ) {\r\n      positionLeft =\r\n        this.platform.width() - tooltipNativeElement.offsetWidth - spacing;\r\n    } else if (positionLeft + tooltipNativeElement.offsetWidth - spacing < 0) {\r\n      positionLeft = spacing;\r\n    }\r\n\r\n    if (positionTop + tooltipNativeElement.offsetHeight + spacing > this.platform.height()) {\r\n      positionTop = this.platform.height() - tooltipNativeElement.offsetHeight - spacing;\r\n    } else if (positionTop + tooltipNativeElement.offsetHeight - spacing < 0) {\r\n      positionTop = spacing;\r\n    }\r\n\r\n    return {\r\n      left: positionLeft,\r\n      top: positionTop,\r\n    };\r\n  }\r\n\r\n   removeTooltip() {\r\n    if (!this.tooltipElement) {\r\n      this.tooltipElement = undefined;\r\n      this.tooltipTimeout = undefined;\r\n      return;\r\n    }\r\n\r\n    this.tooltipElement.instance.fadeState = 'invisible';\r\n\r\n    this.canShow = false;\r\n\r\n    // wait for animation to finish then clear everything out\r\n    setTimeout(() => {\r\n      if (\r\n        this.tooltipElement &&\r\n        typeof this.tooltipElement.destroy === 'function'\r\n      ) {\r\n        this.tooltipElement.destroy();\r\n      }\r\n      this.tooltipCtrl.removeTooltip(this);\r\n      this.tooltipElement = this.tooltipTimeout = undefined;\r\n      this.canShow = true;\r\n    }, 300);\r\n  }\r\n\r\n  private _resetTimer() {\r\n    clearTimeout(this.tooltipTimeout);\r\n    this.tooltipTimeout = setTimeout(() => {\r\n      this.active = false;\r\n    }, this.duration);\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    // if the timer hasn't expired or active is true when the component gets destroyed, the tooltip will remain in the DOM\r\n    // this removes it\r\n    this.removeTooltip();\r\n  }\r\n}\r\n"]}